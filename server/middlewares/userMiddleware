const multer = require('multer')
const path = require('path')

const storage = multer.diskStorage({
    destination: function (req, file, cb) {
      cb(null, 'public'); // Specify the destination folder for uploaded files
    },
    filename: function (req, file, cb) {
      cb(null, file.originalname); // Use the original file name for storing the uploaded file
    }
  });

const upload = multer({
    storage:storage,
    fileFilter: (req,file,cb) => {
        const filetypes = /jpeg|jpg|png|webp/
        const extname = filetypes.test(path.extname(file.originalname).toLowerCase())
        const   mimetype = filetypes.test(file.mimetype)
        if(mimetype && extname){
            console.log('uploads')
            return cb(null,true)
        }else{
            console.log('upload false')
            return cb(null,false)
        }
    }
})

module.exports = {upload
  }
